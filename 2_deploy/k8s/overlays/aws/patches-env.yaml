
apiVersion: v1
kind: ConfigMap
metadata:
  name: ai-config
  namespace: ai-microgen
data:
  # Fill with your AWS endpoints/secrets (mounted via a Secret in prod)
  REDIS_URL: redis://<ELASTICACHE_ENDPOINT>:6379/0
  S3_ENDPOINT: https://s3.<REGION>.amazonaws.com
  S3_REGION: <REGION>
  S3_ACCESS_KEY: <ACCESS_KEY>    # prefer IRSA/roles in real prod
  S3_SECRET_KEY: <SECRET_KEY>
  ARTIFACTS_BUCKET: <ARTIFACTS_BUCKET>
  MODELS_BUCKET: <MODELS_BUCKET>
  PROMPT_SERVICE_URL: http://prompt-service.ai-microgen.svc.cluster.local:8082
  NOTIFY_SERVICE_URL: http://notify-service.ai-microgen.svc.cluster.local:8083
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: ai-web
  namespace: ai-microgen
  annotations:
    kubernetes.io/ingress.class: alb
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
spec:
  rules:
    - host: <YOUR_DOMAIN>
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: webapi
                port: {number: 80}
