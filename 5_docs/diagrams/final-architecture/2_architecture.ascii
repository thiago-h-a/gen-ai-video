
=============================================================================
                          ai‑microgen (final architecture)
=============================================================================
[ React SPA ]
      │ HTTPS
      ▼
[ Web/API (FastAPI) ]───┬────────► /api/catalog/models → [ Model Catalog ]
      │                  │
      │ POST /api/prompts/{image|video}
      ▼                  │
[ Prompt Service ]       │
      │ enqueue(creator_id,cost,payload)
      ▼                  │
[ Fair Scheduler (DRR) ] │    Storage: S3 (artifacts)
  ├─ Redis ring/queues   │        ▲           ▲
  └─ /next /complete ◄───┼────────┘           │ presign URL
        ▲                 │                    │
        │                 │                    │
  [ Orchestrator ]        │                    │
    ├─ dispatch → [ gpu‑worker ] ──► PNG/GIF ──┘
    └─ dispatch → [ video‑worker ] ─► MP4/WebM ─┘
=============================================================================
Legend: Redis used as message queue by scheduler; creator‑fair scheduling via DRR

[HA]  High availability (multiple replicas)
[HPA] Scaled by Horizontal Pod Autoscaler (uses external metric from Prometheus)
[DRR] Deficit Round Robin fairness algorithm
SMR   SageMaker Model Registry
DDB   DynamoDB
ring/ptr  DRR data structures: ring list + pointer; also per-creator deficits & queues
